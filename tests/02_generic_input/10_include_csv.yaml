flow123d_version: 2.0.0
problem: !Coupling_Sequential
  description: Test of includes of CSV file
  mesh:
    mesh_file: ../00_mesh/cube_1x1x1_frac21.msh
    regions: !include_csv:From_Label
      file: ./includes/regions.csv
      n_head_lines: 2
      separator: ' '
      format:
        mesh_label: $0
        name: $2
  flow_equation: !Flow_Darcy_MH
    output_specific:
      raw_flow_output: ./raw_output.txt
    nonlinear_solver:
      linear_solver: !Petsc
        r_tol: 1.0e-10
        a_tol: 1.0e-10
    n_schurs: 2
    input_fields:
      - region: channel_1d
        anisotropy: 10
        sigma: 0.05
      # using region set
      - region: fracture_2d_2
        anisotropy: 1
        sigma: 0.5
      - region: cube_3d
        anisotropy: 0.1
      # using region set
      - region: .BOUNDARY
        bc_type: dirichlet
        bc_pressure: !FieldFormula
          value: x-z
    balance: {}
    output:
      fields:
        - piezo_head_p0
        - pressure_p0
        - pressure_p1
        - velocity_p0
    output_stream: 
      file: ./test1.msh
      format: !gmsh
        variant: ascii
      name: flow_output_stream
  solute_equation: !Coupling_OperatorSplitting
    transport: !Solute_Advection_FV
      input_fields:
        - region: ALL
          init_conc: 0
          porosity: !FieldTimeFunction
            time_function: 
              values: !include_csv
                file: ./includes/field_data.csv
                separator: " "
                n_head_lines: 1
                format:
                  t: $0
                  value: $1
### We need support of CSV include in transposed part of IST if we can use !include_csv tag for MultiFields 
        - region: .BOUNDARY
          bc_conc: 
              -  !FieldTimeFunction
                time_function: 
                  values: !include_csv
                    file: ./includes/field_data.csv
                    separator: " "
                    n_head_lines: 1
                    format:
                      t: $0
                      value: $2

              -  !FieldTimeFunction
                time_function: 
                  values: !include_csv
                    file: ./includes/field_data.csv
                    separator: " "
                    n_head_lines: 1
                    format:
                      t: $0
                      value: $3
                  
      output:
        fields:
          - porosity
          - conc
    substances:
      - A
      - B
    time:
      # test forcing smaller time step then output,
      # but still larger then 0.01 necessary for capture input
      min_dt: 0.1
      max_dt: 0.1
      end_time: 1.0
    output_stream: 
      file: ./transport.pvd
      format: !vtk
        variant: ascii
      name: transport_output_stream
      times:
        - step: 0.1
      precision: 14  
    balance:
      cumulative: true